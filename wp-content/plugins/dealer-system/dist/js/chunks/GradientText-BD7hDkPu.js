import{r as s,M as W,j as h,i as F,u as z,P as G,b as A,d as B,L as D}from"./index-CStSPOWz.js";function v(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function H(...e){return r=>{let t=!1;const i=e.map(o=>{const n=v(o,r);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let o=0;o<i.length;o++){const n=i[o];typeof n=="function"?n():v(e[o],null)}}}}function K(...e){return s.useCallback(H(...e),e)}class U extends s.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const i=t.offsetParent,o=F(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:e,isPresent:r,anchorX:t,root:i}){const o=s.useId(),n=s.useRef(null),m=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:y}=s.useContext(W),b=e.props?.ref??e?.ref,f=K(n,b);return s.useInsertionEffect(()=>{const{width:R,height:u,top:l,left:a,right:g}=m.current;if(r||!n.current||!R||!u)return;const C=t==="left"?`left: ${a}`:`right: ${g}`;n.current.dataset.motionPopId=o;const d=document.createElement("style");y&&(d.nonce=y);const E=i??document.head;return E.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${R}px !important;
            height: ${u}px !important;
            ${C}px !important;
            top: ${l}px !important;
          }
        `),()=>{E.contains(d)&&E.removeChild(d)}},[r]),h.jsx(U,{isPresent:r,childRef:n,sizeRef:m,children:s.cloneElement(e,{ref:f})})}const X=({children:e,initial:r,isPresent:t,onExitComplete:i,custom:o,presenceAffectsLayout:n,mode:m,anchorX:y,root:b})=>{const f=z(_),R=s.useId();let u=!0,l=s.useMemo(()=>(u=!1,{id:R,initial:r,isPresent:t,custom:o,onExitComplete:a=>{f.set(a,!0);for(const g of f.values())if(!g)return;i&&i()},register:a=>(f.set(a,!1),()=>f.delete(a))}),[t,f,i]);return n&&u&&(l={...l}),s.useMemo(()=>{f.forEach((a,g)=>f.set(g,!1))},[t]),s.useEffect(()=>{!t&&!f.size&&i&&i()},[t]),m==="popLayout"&&(e=h.jsx(V,{isPresent:t,anchorX:y,root:b,children:e})),h.jsx(G.Provider,{value:l,children:e})};function _(){return new Map}const j=e=>e.key||"";function S(e){const r=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&r.push(t)}),r}const J=({children:e,custom:r,initial:t=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:n="sync",propagate:m=!1,anchorX:y="left",root:b})=>{const[f,R]=A(m),u=s.useMemo(()=>S(e),[e]),l=m&&!f?[]:u.map(j),a=s.useRef(!0),g=s.useRef(u),C=z(()=>new Map),d=s.useRef(new Set),[E,L]=s.useState(u),[x,w]=s.useState(u);B(()=>{a.current=!1,g.current=u;for(let p=0;p<x.length;p++){const c=j(x[p]);l.includes(c)?(C.delete(c),d.current.delete(c)):C.get(c)!==!0&&C.set(c,!1)}},[x,l.length,l.join("-")]);const M=[];if(u!==E){let p=[...u];for(let c=0;c<x.length;c++){const k=x[c],P=j(k);l.includes(P)||(p.splice(c,0,k),M.push(k))}return n==="wait"&&M.length&&(p=M),w(S(p)),L(u),null}const{forceRender:I}=s.useContext(D);return h.jsx(h.Fragment,{children:x.map(p=>{const c=j(p),k=m&&!f?!1:u===x||l.includes(c),P=()=>{if(d.current.has(c))return;if(d.current.add(c),C.has(c))C.set(c,!0);else return;let $=!0;C.forEach(T=>{T||($=!1)}),$&&(I?.(),w(g.current),m&&R?.(),i&&i())};return h.jsx(X,{isPresent:k,initial:!a.current||t?void 0:!1,custom:r,presenceAffectsLayout:o,mode:n,root:b,onExitComplete:k?void 0:P,anchorX:y,children:p},c)})})};function N({children:e,colors:r=["#111827","#6b7280","#9ca3af","#374151","#6b7280","#111827"],animationSpeed:t=4,className:i=""}){const o=s.useMemo(()=>({background:`linear-gradient(135deg, ${r.join(", ")})`,backgroundSize:"200% 200%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",animation:`gradientShift ${t}s ease-in-out infinite`,display:"inline-block"}),[r,t]);return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes gradientShift {
          0%, 100% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
        }
      `}),h.jsx("span",{className:i,style:o,children:e})]})}export{J as A,N as G};
