import{c as w,j as e,r as n,m as p}from"./chunks/index-ClKf2CbM.js";import{G as F}from"./chunks/GradientText-BvkcKc4C.js";import{B as k}from"./chunks/Button-zSFrK51C.js";import{I as S}from"./chunks/Input-GJFWVui3.js";import{A,a as C,b as P}from"./chunks/Alert-B5GFDb8d.js";import{A as D}from"./chunks/index-CWUfAGMP.js";function E(){const d=window.dealerAccount||{ajaxUrl:"",nonce:"",updateNonce:""},[u,_]=n.useState({email:"",dealer_group:"",dealer_company_name:"",business_name:"",delivery_address_full:"",suburb:"",state:"",post_code:"",operating_hours_weekday:"",operating_hours_saturday:"",accounts_payable:"",accounts_payable_email:"",accounts_payable_mobile:"",accounts_payable_phone:"",parts_manager:"",parts_manager_email:"",parts_manager_mobile:"",parts_manager_phone:"",parts_interpreter_front:"",parts_interpreter_front_email:"",parts_interpreter_front_mobile:"",parts_interpreter_front_phone:"",parts_interpreter_back:"",parts_interpreter_back_email:"",parts_interpreter_back_mobile:"",parts_interpreter_back_phone:"",parts_group:"",parts_group_email:"",parts_group_mobile:"",parts_group_phone:""}),[j,x]=n.useState(!0),[h,b]=n.useState(!1),[o,i]=n.useState(null),f=async()=>{x(!0);try{const t=new FormData;t.append("action","dealer_get_account"),t.append("nonce",d.nonce);const s=await(await fetch(d.ajaxUrl,{method:"POST",body:t})).json();s.success?_(s.data):i({show:!0,message:s.data?.message||"Failed to load account data",error:!0})}catch(t){console.error("Failed to fetch account data:",t),i({show:!0,message:"Network error",error:!0})}finally{x(!1)}};n.useEffect(()=>{f()},[]);const y=(t,r)=>{_(s=>({...s,[t]:r}))},v=async t=>{t.preventDefault(),b(!0);try{const r=new FormData;r.append("action","dealer_update_account"),r.append("nonce",d.updateNonce),Object.entries(u).forEach(([m,N])=>{r.append(m,N)});const l=await(await fetch(d.ajaxUrl,{method:"POST",body:r})).json();l.success?(i({show:!0,message:"Account updated successfully"}),setTimeout(()=>i(null),3e3)):(i({show:!0,message:l.data?.message||"Failed to update",error:!0}),setTimeout(()=>i(null),4e3))}catch{i({show:!0,message:"Network error",error:!0}),setTimeout(()=>i(null),4e3)}finally{b(!1)}},a=({label:t,field:r,type:s="text"})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx(S,{type:s,value:u[r],onChange:l=>y(r,l.target.value)})]}),c=({title:t,nameField:r,emailField:s,mobileField:l,phoneField:m})=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 border-b pb-2",children:t}),e.jsx(a,{label:"Name",field:r}),e.jsx(a,{label:"Email",field:s,type:"email"}),e.jsx(a,{label:"Mobile",field:l,type:"tel"}),e.jsx(a,{label:"Phone",field:m,type:"tel"})]});return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",style:{paddingTop:"80px",width:"100%",maxWidth:"1200px",margin:"0 auto",padding:"80px 16px 40px"},children:[e.jsx(D,{children:o?.show&&e.jsx(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"fixed bottom-6 right-6 z-50 w-full max-w-sm",children:e.jsxs(A,{variant:o.error?"destructive":"default",children:[o.error?e.jsx("svg",{className:"h-4 w-4 text-red-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"h-4 w-4 text-green-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx(C,{children:o.error?"Error":"Success"}),e.jsx(P,{children:o.message})]})]})})}),e.jsxs(p.div,{className:"mb-6 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold mb-1",children:e.jsx(F,{animationSpeed:4,children:"My Account"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your dealer information"})]}),j?e.jsxs(p.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"inline-block w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading account data..."})]}):e.jsxs(p.form,{onSubmit:v,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(a,{label:"Email",field:"email",type:"email"}),e.jsx(a,{label:"Dealer Group",field:"dealer_group"}),e.jsx(a,{label:"Dealer Company Name",field:"dealer_company_name"}),e.jsx(a,{label:"Business Name",field:"business_name"}),e.jsx(a,{label:"Delivery Address",field:"delivery_address_full"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(a,{label:"Suburb",field:"suburb"}),e.jsx(a,{label:"State",field:"state"}),e.jsx(a,{label:"Post Code",field:"post_code"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Operating Hours"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{label:"Monday - Friday",field:"operating_hours_weekday"}),e.jsx(a,{label:"Saturday",field:"operating_hours_saturday"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contacts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{title:"Accounts Payable",nameField:"accounts_payable",emailField:"accounts_payable_email",mobileField:"accounts_payable_mobile",phoneField:"accounts_payable_phone"}),e.jsx(c,{title:"Parts Manager",nameField:"parts_manager",emailField:"parts_manager_email",mobileField:"parts_manager_mobile",phoneField:"parts_manager_phone"}),e.jsx(c,{title:"Parts Interpreter (Front Counter)",nameField:"parts_interpreter_front",emailField:"parts_interpreter_front_email",mobileField:"parts_interpreter_front_mobile",phoneField:"parts_interpreter_front_phone"}),e.jsx(c,{title:"Parts Interpreter (Back Counter)",nameField:"parts_interpreter_back",emailField:"parts_interpreter_back_email",mobileField:"parts_interpreter_back_mobile",phoneField:"parts_interpreter_back_phone"}),e.jsx(c,{title:"Parts Group",nameField:"parts_group",emailField:"parts_group_email",mobileField:"parts_group_mobile",phoneField:"parts_group_phone"})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Need to change your password? "}),e.jsx("a",{href:"/my-account/lost-password/",className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Reset Password â†’"})]}),e.jsx(k,{type:"submit",disabled:h,children:h?"Saving...":"Save Changes"})]})]})]})})}const g=document.getElementById("dealer-account-root");g&&w.createRoot(g).render(e.jsx(n.StrictMode,{children:e.jsx(E,{})}));
