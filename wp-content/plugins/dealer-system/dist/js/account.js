import{c as w,j as e,r as i,m as d}from"./chunks/index-ClKf2CbM.js";import{G as k}from"./chunks/GradientText-BvkcKc4C.js";import{B as C}from"./chunks/Button-zSFrK51C.js";import{I as n}from"./chunks/Input-GJFWVui3.js";import{A as S,a as A,b as _}from"./chunks/Alert-B5GFDb8d.js";import{A as D}from"./chunks/index-CWUfAGMP.js";function E(){const m=window.dealerAccount||{ajaxUrl:"",nonce:"",updateNonce:""},[a,x]=i.useState({email:"",first_name:"",last_name:"",phone:"",company:"",address:"",city:"",state:"",postcode:""}),[y,u]=i.useState(!0),[h,p]=i.useState(!1),[c,r]=i.useState(null),f=async()=>{u(!0);try{const t=new FormData;t.append("action","dealer_get_account"),t.append("nonce",m.nonce);const l=await(await fetch(m.ajaxUrl,{method:"POST",body:t})).json();l.success?x(l.data):r({show:!0,message:l.data?.message||"Failed to load account data",error:!0})}catch(t){console.error("Failed to fetch account data:",t),r({show:!0,message:"Network error",error:!0})}finally{u(!1)}};i.useEffect(()=>{f()},[]);const s=(t,o)=>{x(l=>({...l,[t]:o}))},b=async t=>{t.preventDefault(),p(!0);try{const o=new FormData;o.append("action","dealer_update_account"),o.append("nonce",m.updateNonce),Object.entries(a).forEach(([v,N])=>{o.append(v,N)});const g=await(await fetch(m.ajaxUrl,{method:"POST",body:o})).json();g.success?(r({show:!0,message:"Account updated successfully"}),setTimeout(()=>r(null),3e3)):(r({show:!0,message:g.data?.message||"Failed to update",error:!0}),setTimeout(()=>r(null),4e3))}catch{r({show:!0,message:"Network error",error:!0}),setTimeout(()=>r(null),4e3)}finally{p(!1)}};return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",style:{paddingTop:"120px",maxWidth:"600px",margin:"0 auto"},children:[e.jsx(D,{children:c?.show&&e.jsx(d.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"fixed bottom-6 right-6 z-50 w-full max-w-sm",children:e.jsxs(S,{variant:c.error?"destructive":"default",children:[c.error?e.jsx("svg",{className:"h-4 w-4 text-red-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{className:"h-4 w-4 text-green-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx(A,{children:c.error?"Error":"Success"}),e.jsx(_,{children:c.message})]})]})})}),e.jsxs(d.div,{className:"mb-8 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.jsx(k,{animationSpeed:4,children:"My Account"})}),e.jsx("p",{className:"text-gray-500",children:"Manage your account information"})]}),y?e.jsxs(d.div,{className:"text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"inline-block w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading account data..."})]}):e.jsxs(d.form,{onSubmit:b,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx(n,{type:"email",value:a.email,onChange:t=>s("email",t.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx(n,{type:"text",value:a.first_name,onChange:t=>s("first_name",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx(n,{type:"text",value:a.last_name,onChange:t=>s("last_name",t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx(n,{type:"tel",value:a.phone,onChange:t=>s("phone",t.target.value)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Business Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx(n,{type:"text",value:a.company,onChange:t=>s("company",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx(n,{type:"text",value:a.address,onChange:t=>s("address",t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx(n,{type:"text",value:a.city,onChange:t=>s("city",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),e.jsx(n,{type:"text",value:a.state,onChange:t=>s("state",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),e.jsx(n,{type:"text",value:a.postcode,onChange:t=>s("postcode",t.target.value)})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Password"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Need to change your password?"}),e.jsx("a",{href:"/my-account/lost-password/",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Reset Password â†’"})]}),e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsx(C,{type:"submit",disabled:h,className:"w-full",children:h?"Saving...":"Save Changes"})})]})]})})}const j=document.getElementById("dealer-account-root");j&&w.createRoot(j).render(e.jsx(i.StrictMode,{children:e.jsx(E,{})}));
