import{c as T,j as e,r as d,m as l}from"./chunks/index-ClKf2CbM.js";import{G as j}from"./chunks/GradientText-BvkcKc4C.js";import{B as i}from"./chunks/Button-zSFrK51C.js";import{I as S}from"./chunks/Input-GJFWVui3.js";import{T as _,a as U,b as F,c as n,d as I,e as c}from"./chunks/Table-LW9oDM4-.js";import{A as P}from"./chunks/index-CWUfAGMP.js";function R(){const o=window.dealerCart||{items:[],total:0,checkoutUrl:"/checkout/",updateCartUrl:"",nonce:"",ajaxUrl:"",cartActionNonce:""},[x,p]=d.useState(o.items),[h,m]=d.useState(null),[y,u]=d.useState(null),f=x.reduce((t,a)=>t+a.subtotal,0),b=async(t,a)=>{if(!(a<1)){p(r=>r.map(s=>s.key===t?{...s,quantity:a,subtotal:s.price*a}:s)),m(t);try{const r=new FormData;r.append("action","dealer_update_cart_item"),r.append("nonce",o.cartActionNonce),r.append("cart_item_key",t),r.append("quantity",String(a)),await fetch(o.ajaxUrl,{method:"POST",body:r})}catch(r){console.error("Failed to update cart:",r)}finally{m(null)}}},N=async()=>{m("all"),window.location.reload()},v=async t=>{u(t);try{const a=new FormData;a.append("action","dealer_remove_from_cart"),a.append("nonce",o.cartActionNonce),a.append("cart_item_key",t);const s=await(await fetch(o.ajaxUrl,{method:"POST",body:a})).json();s.success?p(k=>k.filter(C=>C.key!==t)):console.error("Failed to remove item:",s.data?.message)}catch(a){console.error("Failed to remove item:",a)}finally{u(null)}},w=t=>{switch(t){case"stock_order":return"bg-green-100 text-green-700";case"daily_order":return"bg-blue-100 text-blue-700";case"vor_order":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",children:[e.jsxs(l.div,{className:"mb-8 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.jsx(j,{animationSpeed:4,children:"Shopping Cart"})}),e.jsx("p",{className:"text-gray-500",children:"Review your order before checkout"})]}),x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white overflow-hidden",children:e.jsxs(_,{children:[e.jsx(U,{children:e.jsxs(F,{children:[e.jsx(n,{children:"Product"}),e.jsx(n,{children:"SKU"}),e.jsx(n,{children:"Type"}),e.jsx(n,{className:"text-right",children:"Price"}),e.jsx(n,{className:"text-center",children:"Quantity"}),e.jsx(n,{className:"text-right",children:"Subtotal"}),e.jsx(n,{})]})}),e.jsx(I,{children:e.jsx(P,{children:x.map((t,a)=>e.jsxs(l.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:a*.05},className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(c,{className:"font-medium text-gray-900",children:t.name}),e.jsx(c,{className:"font-mono text-gray-600",children:t.sku}),e.jsx(c,{children:e.jsx("span",{className:`inline-flex !px-3 !py-1 text-xs font-medium rounded-full ${w(t.orderType)}`,children:t.orderTypeLabel||"Stock Order"})}),e.jsxs(c,{className:"text-right text-gray-700",children:["$",t.price.toFixed(2)]}),e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(S,{type:"number",min:1,value:t.quantity,onChange:r=>b(t.key,parseInt(r.target.value)||1),className:"w-20 h-8 text-center"})})}),e.jsxs(c,{className:"text-right font-semibold text-gray-900",children:["$",t.subtotal.toFixed(2)]}),e.jsx(c,{children:e.jsx(i,{size:"sm",onClick:()=>v(t.key),disabled:y===t.key,children:y===t.key?"...":"Remove"})})]},t.key))})})]})}),e.jsxs(l.div,{className:"mt-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(i,{onClick:N,disabled:h==="all",children:h==="all"?"Updating...":"Update Cart"}),e.jsxs("div",{className:"rounded-xl p-6 min-w-[300px] space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Total"}),e.jsx("span",{className:"text-3xl font-bold",children:e.jsxs(j,{animationSpeed:4,children:["$",f.toFixed(2)]})})]}),e.jsx(i,{className:"w-full h-12 text-base",onClick:()=>window.location.href=o.checkoutUrl,children:"Proceed to Checkout"})]})]})]}):e.jsxs(l.div,{className:"text-center py-12",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ›’"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Add some products to get started"}),e.jsx(i,{onClick:()=>window.location.href="/inventory/",children:"Browse Inventory"})]})]})})}const g=document.getElementById("dealer-cart-root");g&&T.createRoot(g).render(e.jsx(d.StrictMode,{children:e.jsx(R,{})}));
