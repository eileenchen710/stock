import{c as w,j as e,r as o,m as i,B as S}from"./chunks/index-CStSPOWz.js";import{G as v,A as C}from"./chunks/GradientText-BD7hDkPu.js";import{I as y,T,a as k,b as I,c as n,d as A,e as r}from"./chunks/Table-SO8DCWnb.js";function P(){const c=window.dealerInventory||{products:[],cartUrl:"/cart/",nonce:"",ajaxUrl:""},[l,g]=o.useState(""),[x,u]=o.useState({}),[m,h]=o.useState(null),d=o.useMemo(()=>{if(!l)return c.products;const t=l.toLowerCase();return c.products.filter(s=>s.sku.toLowerCase().includes(t)||s.name.toLowerCase().includes(t))},[c.products,l]),p=t=>t<=0?{text:"Out of Stock",className:"text-red-600"}:t<=10?{text:"Low Stock",className:"text-amber-600"}:{text:"In Stock",className:"text-green-600"},N=(t,s)=>{u(a=>({...a,[t]:s}))},f=async t=>{const s=x[t.id]||1;h(t.id);try{const a=new FormData;a.append("add-to-cart",String(t.id)),a.append("quantity",String(s)),await fetch(c.cartUrl,{method:"POST",body:a}),window.location.reload()}catch(a){console.error("Failed to add to cart:",a)}finally{h(null)}};return e.jsx("div",{className:"min-h-screen bg-white pt-32 pb-20 px-6",children:e.jsxs("div",{className:"w-full max-w-5xl mx-auto box-border",children:[e.jsxs(i.div,{className:"mb-8 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.jsx(v,{animationSpeed:4,children:"Inventory"})}),e.jsx("p",{className:"text-gray-500",children:"Browse and order products"})]}),e.jsx(i.div,{className:"mb-8 flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(y,{type:"text",placeholder:"Search by SKU or product name...",value:l,onChange:t=>g(t.target.value),className:"max-w-md w-full"})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:e.jsxs(T,{children:[e.jsx(k,{children:e.jsxs(I,{children:[e.jsx(n,{children:"SKU"}),e.jsx(n,{children:"Product"}),e.jsx(n,{children:"Category"}),e.jsx(n,{className:"text-right",children:"Price"}),e.jsx(n,{className:"text-right",children:"Stock"}),e.jsx(n,{children:"Status"}),e.jsx(n,{className:"text-right",children:"Order"})]})}),e.jsx(A,{children:e.jsx(C,{children:d.map((t,s)=>{const a=p(t.stock);return e.jsxs(i.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:s*.02},className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(r,{className:"font-mono text-gray-600",children:t.sku||"-"}),e.jsx(r,{className:"font-medium text-gray-900",children:t.name}),e.jsx(r,{className:"text-gray-500",children:t.category}),e.jsxs(r,{className:"text-right text-gray-900",children:["$",t.price.toFixed(2)]}),e.jsx(r,{className:"text-right text-gray-700",children:t.stock??"N/A"}),e.jsx(r,{children:e.jsx("span",{className:`font-medium ${a.className}`,children:a.text})}),e.jsx(r,{className:"text-right",children:t.stock>0?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(y,{type:"number",min:1,max:t.stock,value:x[t.id]||1,onChange:b=>N(t.id,parseInt(b.target.value)||1),className:"w-20 h-8 text-center"}),e.jsx(S,{size:"sm",onClick:()=>f(t),disabled:m===t.id,children:m===t.id?"...":"Add"})]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})})]},t.id)})})})]})}),d.length===0&&e.jsx(i.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("p",{className:"text-gray-500",children:['No products found matching "',l,'"']})}),e.jsxs(i.div,{className:"mt-6 text-sm text-gray-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["Showing ",d.length," of ",c.products.length," products"]})]})})}const j=document.getElementById("dealer-inventory-root");j&&w.createRoot(j).render(e.jsx(o.StrictMode,{children:e.jsx(P,{})}));
