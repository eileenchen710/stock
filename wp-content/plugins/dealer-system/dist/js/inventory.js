import{c as k,j as e,r as l,m as d,B as _}from"./chunks/index-BwIoScMd.js";import{G as O,A as I}from"./chunks/GradientText-Chka7Kno.js";import{I as j}from"./chunks/Input-UQgZsx06.js";import{T as A,a as E,b as B,c as o,d as L,e as i}from"./chunks/Table-BkFhRHuK.js";const P={stock_order:"Stock Order",daily_order:"Daily Order",vor_order:"VOR Order"};function R(){const c=window.dealerInventory||{products:[],cartUrl:"/cart/",nonce:"",ajaxUrl:"",addToCartNonce:""},[m,N]=l.useState(""),[y,b]=l.useState({}),[p,S]=l.useState({}),[u,g]=l.useState(null),h=l.useMemo(()=>{if(!m)return c.products;const t=m.toLowerCase();return c.products.filter(a=>a.sku.toLowerCase().includes(t)||a.name.toLowerCase().includes(t))},[c.products,m]),w=t=>t<=0?{text:"Out of Stock",className:"text-red-600"}:t<=10?{text:"Low Stock",className:"text-amber-600"}:{text:"In Stock",className:"text-green-600"},T=(t,a)=>{b(s=>({...s,[t]:a}))},v=(t,a)=>{S(s=>({...s,[t]:a}))},C=async t=>{const a=y[t.id]||1,s=p[t.id]||"stock_order";g(t.id);try{const r=new FormData;r.append("action","dealer_add_to_cart"),r.append("nonce",c.addToCartNonce),r.append("product_id",String(t.id)),r.append("quantity",String(a)),r.append("order_type",s);const x=await(await fetch(c.ajaxUrl,{method:"POST",body:r})).json();x.success?window.location.reload():(console.error("Failed to add to cart:",x.data?.message),alert("Failed to add to cart: "+(x.data?.message||"Unknown error")))}catch(r){console.error("Failed to add to cart:",r),alert("Failed to add to cart")}finally{g(null)}};return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"page-content",children:[e.jsxs(d.div,{className:"mb-8 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.jsx(O,{animationSpeed:4,children:"Inventory"})}),e.jsx("p",{className:"text-gray-500",children:"Browse and order products"})]}),e.jsx(d.div,{className:"!mb-4 flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(j,{type:"text",placeholder:"Search by SKU or product name...",value:m,onChange:t=>N(t.target.value),className:"max-w-md w-full !rounded-full"})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white border border-gray-200 rounded-3xl overflow-hidden",children:e.jsxs(A,{children:[e.jsx(E,{children:e.jsxs(B,{children:[e.jsx(o,{children:"SKU"}),e.jsx(o,{children:"Product"}),e.jsx(o,{children:"Category"}),e.jsx(o,{className:"text-right",children:"Stock"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:"Type"}),e.jsx(o,{className:"text-right",children:"Order"})]})}),e.jsx(L,{children:e.jsx(I,{children:h.map((t,a)=>{const s=w(t.stock),r=p[t.id]||"stock_order";return e.jsxs(d.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:a*.02},className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(i,{className:"font-mono text-gray-600",children:t.sku||"-"}),e.jsx(i,{className:"font-medium text-gray-900",children:t.name}),e.jsx(i,{className:"text-gray-500",children:t.category}),e.jsx(i,{className:"text-right text-gray-700",children:t.stock??"N/A"}),e.jsx(i,{children:e.jsx("span",{className:`font-medium ${s.className}`,children:s.text})}),e.jsx(i,{children:e.jsx("select",{value:r,onChange:n=>v(t.id,n.target.value),className:"h-10 px-3 py-2 text-sm border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:Object.entries(P).map(([n,x])=>e.jsx("option",{value:n,children:x},n))})}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(j,{type:"number",min:1,value:y[t.id]||1,onChange:n=>T(t.id,parseInt(n.target.value)||1),className:"w-20 h-8 text-center"}),e.jsx(_,{size:"sm",onClick:()=>C(t),disabled:u===t.id,children:u===t.id?"...":"Add"})]})})]},t.id)})})})]})}),h.length===0&&e.jsx(d.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("p",{className:"text-gray-500",children:['No products found matching "',m,'"']})}),e.jsxs(d.div,{className:"mt-6 text-sm text-gray-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["Showing ",h.length," of ",c.products.length," products"]})]})})}const f=document.getElementById("dealer-inventory-root");f&&k.createRoot(f).render(e.jsx(l.StrictMode,{children:e.jsx(R,{})}));
