import{c as C,j as e,r as l,m as d,B as _}from"./chunks/index-BssOvU0_.js";import{G as O,A}from"./chunks/GradientText-CDyuto2A.js";import{I as u}from"./chunks/Input-BJbKxmUE.js";import{T as I,a as E,b as B,c as i,d as L,e as o}from"./chunks/Table-BA1IXU3v.js";const P={stock_order:"Stock Order",daily_order:"Daily Order",vor_order:"VOR Order"};function R(){const c=window.dealerInventory||{products:[],cartUrl:"/cart/",nonce:"",ajaxUrl:"",addToCartNonce:""},[m,b]=l.useState(""),[y,N]=l.useState({}),[g,w]=l.useState({}),[j,p]=l.useState(null),h=l.useMemo(()=>{if(!m)return c.products;const t=m.toLowerCase();return c.products.filter(a=>a.sku.toLowerCase().includes(t)||a.name.toLowerCase().includes(t))},[c.products,m]),S=t=>t<=0?{text:"Out of Stock",className:"text-red-600"}:t<=10?{text:"Low Stock",className:"text-amber-600"}:{text:"In Stock",className:"text-green-600"},T=(t,a)=>{N(r=>({...r,[t]:a}))},v=(t,a)=>{w(r=>({...r,[t]:a}))},k=async t=>{const a=y[t.id]||1,r=g[t.id]||"stock_order";p(t.id);try{const s=new FormData;s.append("action","dealer_add_to_cart"),s.append("nonce",c.addToCartNonce),s.append("product_id",String(t.id)),s.append("quantity",String(a)),s.append("order_type",r);const x=await(await fetch(c.ajaxUrl,{method:"POST",body:s})).json();x.success?window.location.reload():(console.error("Failed to add to cart:",x.data?.message),alert("Failed to add to cart: "+(x.data?.message||"Unknown error")))}catch(s){console.error("Failed to add to cart:",s),alert("Failed to add to cart")}finally{p(null)}};return e.jsx("div",{className:"min-h-screen bg-white pb-20",children:e.jsxs("div",{className:"w-full box-border",children:[e.jsxs(d.div,{className:"mb-8 text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:e.jsx(O,{animationSpeed:4,children:"Inventory"})}),e.jsx("p",{className:"text-gray-500",children:"Browse and order products"})]}),e.jsx(d.div,{className:"mb-8 flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(u,{type:"text",placeholder:"Search by SKU or product name...",value:m,onChange:t=>b(t.target.value),className:"max-w-md w-full"})}),e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:e.jsxs(I,{children:[e.jsx(E,{children:e.jsxs(B,{children:[e.jsx(i,{children:"SKU"}),e.jsx(i,{children:"Product"}),e.jsx(i,{children:"Category"}),e.jsx(i,{className:"text-right",children:"Stock"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Type"}),e.jsx(i,{className:"text-right",children:"Order"})]})}),e.jsx(L,{children:e.jsx(A,{children:h.map((t,a)=>{const r=S(t.stock),s=g[t.id]||"stock_order";return e.jsxs(d.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:a*.02},className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(o,{className:"font-mono text-gray-600",children:t.sku||"-"}),e.jsx(o,{className:"font-medium text-gray-900",children:t.name}),e.jsx(o,{className:"text-gray-500",children:t.category}),e.jsx(o,{className:"text-right text-gray-700",children:t.stock??"N/A"}),e.jsx(o,{children:e.jsx("span",{className:`font-medium ${r.className}`,children:r.text})}),e.jsx(o,{children:e.jsx("select",{value:s,onChange:n=>v(t.id,n.target.value),className:"h-8 px-2 text-sm border border-gray-200 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent",children:Object.entries(P).map(([n,x])=>e.jsx("option",{value:n,children:x},n))})}),e.jsx(o,{className:"text-right",children:t.stock>0?e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(u,{type:"number",min:1,max:t.stock,value:y[t.id]||1,onChange:n=>T(t.id,parseInt(n.target.value)||1),className:"w-20 h-8 text-center"}),e.jsx(_,{size:"sm",onClick:()=>k(t),disabled:j===t.id,children:j===t.id?"...":"Add"})]}):e.jsx("span",{className:"text-gray-400",children:"N/A"})})]},t.id)})})})]})}),h.length===0&&e.jsx(d.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("p",{className:"text-gray-500",children:['No products found matching "',m,'"']})}),e.jsxs(d.div,{className:"mt-6 text-sm text-gray-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:["Showing ",h.length," of ",c.products.length," products"]})]})})}const f=document.getElementById("dealer-inventory-root");f&&C.createRoot(f).render(e.jsx(l.StrictMode,{children:e.jsx(R,{})}));
